import{r as a,g as m,j as O}from"./app-DmjyuezX.js";const y=a.createContext({dragDropManager:void 0});function d(r,t,...e){if(C()&&t===void 0)throw new Error("invariant requires an error message argument");if(!r){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;n=new Error(t.replace(/%s/g,function(){return e[o++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function C(){return typeof process<"u"&&!0}var v=function r(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,o,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(o=n;o--!==0;)if(!r(t[o],e[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[o]))return!1;for(o=n;o--!==0;){var i=s[o];if(!r(t[i],e[i]))return!1}return!0}return t!==t&&e!==e};const M=m(v),f=typeof window<"u"?a.useLayoutEffect:a.useEffect;function E(r,t,e){const[n,o]=a.useState(()=>t(r)),s=a.useCallback(()=>{const i=t(r);M(n,i)||(o(i),e&&e())},[n,r,e]);return f(s),[n,s]}function _(r,t,e){const[n,o]=E(r,t,e);return f(function(){const i=r.getHandlerId();if(i!=null)return r.subscribeToStateChange(o,{handlerIds:[i]})},[r,o]),n}function w(r,t,e){return _(t,r||(()=>({})),()=>e.reconnect())}function R(r,t){const e=[...t||[]];return t==null&&typeof r!="function"&&e.push(r),a.useMemo(()=>typeof r=="function"?r():r,e)}let p=!1;class b{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,e){return this.internalMonitor.subscribeToStateChange(t,e)}canDrop(){if(!this.targetId)return!1;d(!p,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return p=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{p=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function S(r,t,e){const n=e.getRegistry(),o=n.addTarget(r,t);return[o,()=>n.removeTarget(o)]}function Q(r,t,e){const n=e.getRegistry(),o=n.addSource(r,t);return[o,()=>n.removeSource(o)]}function x(r,t,e,n){let o=e?e.call(n,r,t):void 0;if(o!==void 0)return!!o;if(r===t)return!0;if(typeof r!="object"||!r||typeof t!="object"||!t)return!1;const s=Object.keys(r),i=Object.keys(t);if(s.length!==i.length)return!1;const c=Object.prototype.hasOwnProperty.bind(t);for(let u=0;u<s.length;u++){const l=s[u];if(!c(l))return!1;const h=r[l],T=t[l];if(o=e?e.call(n,h,T,l):void 0,o===!1||o===void 0&&h!==T)return!1}return!0}function H(r){return r!==null&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function j(r){if(typeof r.type=="string")return;const t=r.type.displayName||r.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function k(r){return(t=null,e=null)=>{if(!a.isValidElement(t)){const s=t;return r(s,e),s}const n=t;return j(n),P(n,e?s=>r(s,e):r)}}function N(r){const t={};return Object.keys(r).forEach(e=>{const n=r[e];if(e.endsWith("Ref"))t[e]=r[e];else{const o=k(n);t[e]=()=>o}}),t}function D(r,t){typeof r=="function"?r(t):r.current=t}function P(r,t){const e=r.ref;return d(typeof e!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),e?a.cloneElement(r,{ref:n=>{D(e,n),D(t,n)}}):a.cloneElement(r,{ref:t})}class L{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const e=this.dropTarget;if(this.handlerId){if(!e){this.lastConnectedDropTarget=e;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=e,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,e,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!x(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=N({dropTarget:(e,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,H(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function g(){const{dragDropManager:r}=a.useContext(y);return d(r!=null,"Expected drag drop context"),r}function A(r){return a.useMemo(()=>r.hooks.dropTarget(),[r])}function F(r){const t=g(),e=a.useMemo(()=>new L(t.getBackend()),[t]);return f(()=>(e.dropTargetOptions=r||null,e.reconnect(),()=>e.disconnectDropTarget()),[r]),e}function V(){const r=g();return a.useMemo(()=>new b(r),[r])}function q(r){const{accept:t}=r;return a.useMemo(()=>(d(r.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class z{canDrop(){const t=this.spec,e=this.monitor;return t.canDrop?t.canDrop(e.getItem(),e):!0}hover(){const t=this.spec,e=this.monitor;t.hover&&t.hover(e.getItem(),e)}drop(){const t=this.spec,e=this.monitor;if(t.drop)return t.drop(e.getItem(),e)}constructor(t,e){this.spec=t,this.monitor=e}}function W(r,t){const e=a.useMemo(()=>new z(r,t),[t]);return a.useEffect(()=>{e.spec=r},[r]),e}function X(r,t,e){const n=g(),o=W(r,t),s=q(r);f(function(){const[c,u]=S(s,o,n);return t.receiveHandlerId(c),e.receiveHandlerId(c),u},[n,t,o,e,s.map(i=>i.toString()).join("|")])}function Y(r,t){const e=R(r,t),n=V(),o=F(e.options);return X(e,n,o),[w(e.collect,n,o),A(o)]}const I="__NATIVE_FILE__",$="__NATIVE_URL__",U="__NATIVE_TEXT__",G="__NATIVE_HTML__",Z=Object.freeze(Object.defineProperty({__proto__:null,FILE:I,HTML:G,TEXT:U,URL:$},Symbol.toStringTag,{value:"Module"})),J=r=>{const{onDrop:t}=r,{style:e}=r,[{canDrop:n,isOver:o},s]=Y(()=>({accept:[I],drop(c){t&&t(c)},canDrop(c){return!0},hover(c){},collect:c=>(c.getItem(),{isOver:c.isOver(),canDrop:c.canDrop()})}),[r]),i=n&&o;return O.jsx("div",{ref:s,style:e,className:i?"skeleton-animation":"",children:i?"Release to drop":"Drag & Drop file here"})},B=Object.freeze(Object.defineProperty({__proto__:null,TargetBox:J},Symbol.toStringTag,{value:"Module"}));export{y as D,I as F,G as H,Z as N,U as T,$ as U,H as a,f as b,R as c,w as d,Y as e,J as f,B as g,d as i,Q as r,x as s,g as u,N as w};
