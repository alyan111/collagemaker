import{R as w,j as e,r as T,a as S}from"./app-Dnxnbd5t.js";import{A as k}from"./AuthenticatedLayout-BUEoN__A.js";import{S as l}from"./ActionBar-7_LjK_Of.js";import{C as I,d as F}from"./Delete-6JCh1ahK.js";import{S as A,A as E}from"./Snackbar-XAGefIil.js";import{G as D}from"./Grow-Cf_XXZYe.js";import{B as m}from"./Box-xPMhvo3M.js";import{S as N,T as u}from"./TextField-Bzxkl9AI.js";import{M as v}from"./MenuItem-BwlnjAz9.js";import{I as $,T as g}from"./Typography-cLv90uqt.js";import"./ApplicationLogo-RZf2Ivxe.js";import"./transition-BrGjxLvK.js";import"./Close-C3nSCCQi.js";function B({index:s,image:r,uni:p}){const[i,b]=w.useState(r.shapeType),y=t=>{let a=t.target.value;b(a);const d=new FormData;d.append("shapeType",i);const n=localStorage.getItem("apiToken");axios.post(route("update.template.image",{uni:p}),d,{headers:{Authorization:`Bearer ${n}`}}).then(x=>{o(x.data.message,"success")}).catch(x=>{})},[c,h]=w.useState({status:!1,message:"",severity:""}),o=(t,a)=>{h({status:!0,message:t,severity:a})},f=(t,a)=>{a!=="clickaway"&&h(!1)},j=t=>{const a=t.target.files[0];if(a){const d=s>1?"image":s==0?"thumbnail":"shade",n=new FormData;n.append("image",a),n.append(p,p),n.append("type",d),n.append("purpose","updateImage");const x=localStorage.getItem("apiToken");axios.post(route("update.template.image",{uni:p}),n,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${x}`}}).then(C=>{o(C.data.message,"success")}).catch(C=>{})}};return e.jsxs(I,{className:"mb-4",sx:{width:"300px",height:"300px",margin:"20px",position:"relative",overflow:"hidden"},children:[c.status&&e.jsx(A,{open:c.status,autoHideDuration:4e3,onClose:f,TransitionComponent:D,anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(E,{onClose:f,severity:c.severity,variant:"filled",sx:{width:"100%"},children:c.message})}),e.jsx(m,{sx:{position:"absolute",bottom:"0px",left:"0px",width:"100%",backgroundColor:"lightblue",opacity:50},children:e.jsx("input",{type:"file",onChange:t=>j(t)})}),e.jsxs("div",{className:"mt-2",children:[typeof r=="string"&&e.jsx(m,{sx:{width:"100%",height:"100%"},children:e.jsx("img",{src:r,alt:`Selected file ${s}`,style:{width:"100%",height:"100%",objectFit:"cover"}})}),typeof r!="string"&&e.jsx(m,{sx:{width:"100%",height:"100%"},children:e.jsx("img",{src:r.image,alt:`Selected file ${s}`,style:{width:"100%",height:"100%",objectFit:"cover"}})}),r.isFrame&&e.jsx(l,{sx:{position:"absolute",top:"10px",left:"10px",margin:"7px",borderRadius:"12px",width:"200px",padding:"10px 20px ",backgroundColor:"#fff",color:"black"},spacing:1,children:e.jsxs(N,{value:i,label:"Shape Type",id:`shapeType-${s}`,labelId:`shapeType-${s}`,onChange:t=>y(t),children:[e.jsx(v,{value:"circle",children:"Circle"}),e.jsx(v,{value:"square",children:"Square"}),e.jsx(v,{value:"other",children:"Other"})]})})]}),e.jsx(m,{sx:{position:"absolute",top:"10px",right:"10px"},children:e.jsx($,{onClick:()=>handleRemoveFileInput(s),"aria-label":"delete",children:e.jsx(F,{color:"warning"})})})]},s)}function L({auth:s,type:r,title:p,template:i,headerOptions:b,categories:y="",apiToken:c}){w.useEffect(()=>{localStorage.setItem("apiToken",c)},[]);const h=window.location.href.split("/templates/")[1],[o,f]=T.useState({title:i.data.title,tags:i.data.tags,height:i.data.height,width:i.data.width}),j=[i.data.thumbnail,i.data.whiteImage,...i.data.images];return e.jsxs(k,{user:s.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:p}),children:[e.jsx(S,{title:"Dashboard"}),e.jsx("div",{className:"square-pattern-bg",children:e.jsx("div",{className:"py-12",style:{width:"100%"},children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",style:{position:"relative",width:"100%"},children:[e.jsxs(l,{spacing:5,direction:"row",justifyContent:"center",sx:{padding:"30px 0px",backgroundColor:"white",width:"100%"},children:[e.jsxs(l,{spacing:1,children:[e.jsx(g,{variant:"p",component:"p",children:"Enter title for template"}),e.jsx(u,{value:o.title,sx:{width:"200px"},id:"outlined-basic",label:"Title",variant:"outlined"})]}),e.jsxs(l,{spacing:1,children:[e.jsx(g,{variant:"p",component:"p",children:"Enter tags for template"}),e.jsx(u,{value:o.tags,sx:{width:"200px"},id:"outlined-basic",label:"Tags",variant:"outlined"})]}),e.jsxs(l,{spacing:1,children:[e.jsx(g,{variant:"p",component:"p",children:"Enter width for template"}),e.jsx(u,{value:o.width,sx:{width:"200px"},id:"outlined-basic",label:"Width",variant:"outlined"})]}),e.jsxs(l,{spacing:1,children:[e.jsx(g,{variant:"p",component:"p",children:"Enter height for template"}),e.jsx(u,{value:o.height,sx:{width:"200px"},id:"outlined-basic",label:"Height",variant:"outlined"})]})]}),e.jsx(l,{direction:"row",flexWrap:"wrap",justifyContent:"center",children:j.map((t,a)=>e.jsx(B,{index:a,image:t,uni:t.uni||h,type:a>1?"image":a==0?"thumbnail":"shade"},a))})]})})})]})}export{L as default};
